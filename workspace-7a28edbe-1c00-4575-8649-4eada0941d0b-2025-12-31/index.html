<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Helium AI">
    <meta name="description" content="Modern Point of Sale System">
    <title>RetroPos - Point of Sale System</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i data-lucide="shopping-bag"></i>
                <h1>RetroPos</h1>
            </div>
            <div class="header-actions">
                <button class="btn-icon active" onclick="showView('dashboard')" title="Dashboard">
                    <i data-lucide="layout-dashboard"></i>
                </button>
                <button class="btn-icon" onclick="showView('pos')" title="Point of Sale">
                    <i data-lucide="shopping-cart"></i>
                </button>
                <button class="btn-icon" onclick="showView('products')" title="Products">
                    <i data-lucide="package"></i>
                </button>
                <button class="btn-icon" onclick="showView('inventory')" title="Inventory">
                    <i data-lucide="warehouse"></i>
                </button>
                <button class="btn-icon" onclick="showView('reports')" title="Reports">
                    <i data-lucide="bar-chart-3"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <main class="main-container">
        <!-- Admin Dashboard View -->
        <div id="dashboard-view" class="view active">
            <div class="view-header">
                <h2>Admin Dashboard</h2>
                <button class="btn-primary" onclick="refreshDashboard()">
                    <i data-lucide="refresh-cw"></i> Refresh
                </button>
            </div>

            <!-- Key Metrics -->
            <div class="dashboard-grid">
                <div class="stat-card yellow">
                    <div class="stat-icon yellow">
                        <i data-lucide="dollar-sign"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="dash-revenue">$0.00</h3>
                        <p>Total Revenue</p>
                        <div class="trend up" id="revenue-trend">
                            <i data-lucide="trending-up"></i>
                            <span>+0%</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card green">
                    <div class="stat-icon green">
                        <i data-lucide="trending-up"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="dash-profit">$0.00</h3>
                        <p>Net Profit</p>
                        <div class="trend up" id="profit-trend">
                            <i data-lucide="trending-up"></i>
                            <span>+0%</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card blue">
                    <div class="stat-icon blue">
                        <i data-lucide="receipt"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="dash-taxes">$0.00</h3>
                        <p>Taxes Collected</p>
                        <div class="trend" id="tax-trend">
                            <span>8% rate</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card orange">
                    <div class="stat-icon orange">
                        <i data-lucide="shopping-bag"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="dash-transactions">0</h3>
                        <p>Transactions</p>
                        <div class="trend" id="transaction-trend">
                            <span>Today</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Secondary Metrics -->
            <div class="dashboard-grid">
                <div class="stat-card">
                    <div class="stat-icon blue">
                        <i data-lucide="package"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="dash-products">0</h3>
                        <p>Total Products</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon green">
                        <i data-lucide="layers"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="dash-inventory-value">$0</h3>
                        <p>Inventory Value</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon orange">
                        <i data-lucide="alert-triangle"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="dash-low-stock">0</h3>
                        <p>Low Stock Alerts</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon yellow">
                        <i data-lucide="trending-up"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="dash-avg-sale">$0.00</h3>
                        <p>Avg Transaction</p>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="card">
                <div class="card-header">
                    <h3>Recent Transactions</h3>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Transaction ID</th>
                            <th>Items</th>
                            <th>Total</th>
                            <th>Payment</th>
                        </tr>
                    </thead>
                    <tbody id="dash-recent-sales">
                        <tr><td colspan="5" style="text-align: center;">No recent transactions</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- POS View -->
        <div id="pos-view" class="view">
            <div class="pos-layout">
                <!-- Left Panel - Cart -->
                <div class="cart-panel">
                    <div class="panel-header">
                        <h2>Current Sale</h2>
                        <button class="btn-secondary btn-sm" onclick="clearCart()">
                            <i data-lucide="trash-2"></i> Clear
                        </button>
                    </div>
                    
                    <div class="barcode-scanner">
                        <input type="text" id="barcode-input" placeholder="Scan or enter barcode..." 
                               onkeypress="handleBarcodeInput(event)">
                        <button class="btn-primary" onclick="scanBarcode()">
                            <i data-lucide="scan"></i> Scan
                        </button>
                    </div>

                    <div class="cart-items" id="cart-items">
                        <div class="empty-cart">
                            <i data-lucide="shopping-cart"></i>
                            <p>Cart is empty</p>
                            <small>Scan items to begin</small>
                        </div>
                    </div>

                    <div class="cart-summary">
                        <div class="summary-row">
                            <span>Subtotal:</span>
                            <span id="subtotal">$0.00</span>
                        </div>
                        <div class="summary-row">
                            <span>Tax (8%):</span>
                            <span id="tax">$0.00</span>
                        </div>
                        <div class="summary-row total">
                            <span>Total:</span>
                            <span id="total">$0.00</span>
                        </div>
                    </div>

                    <button class="btn-checkout" onclick="processCheckout()">
                        <i data-lucide="credit-card"></i> Process Payment
                    </button>
                </div>

                <!-- Right Panel - Product Grid -->
                <div class="product-grid-panel">
                    <div class="panel-header">
                        <h2>Quick Select</h2>
                        <input type="text" class="search-input" placeholder="Search products..." 
                               oninput="filterProducts(this.value)">
                    </div>
                    <div class="product-grid" id="product-grid">
                        <!-- Products will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Products Management View -->
        <div id="products-view" class="view">
            <div class="view-header">
                <h2>Product Management</h2>
                <button class="btn-primary" onclick="showAddProductModal()">
                    <i data-lucide="plus"></i> Add Product
                </button>
            </div>
            <div class="card">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Barcode</th>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Price</th>
                            <th>Stock</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="products-table-body">
                        <!-- Products will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Inventory View -->
        <div id="inventory-view" class="view">
            <div class="view-header">
                <h2>Inventory Overview</h2>
                <button class="btn-primary" onclick="exportInventory()">
                    <i data-lucide="download"></i> Export
                </button>
            </div>
            <div class="dashboard-grid">
                <div class="stat-card blue">
                    <div class="stat-icon blue">
                        <i data-lucide="package"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="total-products">0</h3>
                        <p>Total Products</p>
                    </div>
                </div>
                <div class="stat-card green">
                    <div class="stat-icon green">
                        <i data-lucide="trending-up"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="total-value">$0</h3>
                        <p>Inventory Value</p>
                    </div>
                </div>
                <div class="stat-card orange">
                    <div class="stat-icon orange">
                        <i data-lucide="alert-triangle"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="low-stock">0</h3>
                        <p>Low Stock Items</p>
                    </div>
                </div>
                <div class="stat-card yellow">
                    <div class="stat-icon yellow">
                        <i data-lucide="layers"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="total-stock">0</h3>
                        <p>Total Units</p>
                    </div>
                </div>
            </div>
            <div class="card">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Barcode</th>
                            <th>Current Stock</th>
                            <th>Status</th>
                            <th>Value</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="inventory-table-body">
                        <!-- Inventory will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Reports View -->
        <div id="reports-view" class="view">
            <div class="view-header">
                <h2>Sales Reports</h2>
                <div class="date-filter">
                    <input type="date" id="report-start-date" class="date-input">
                    <span>to</span>
                    <input type="date" id="report-end-date" class="date-input">
                    <button class="btn-primary" onclick="generateReport()">
                        <i data-lucide="refresh-cw"></i> Generate
                    </button>
                </div>
            </div>
            <div class="dashboard-grid">
                <div class="stat-card yellow">
                    <div class="stat-icon yellow">
                        <i data-lucide="dollar-sign"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="total-sales">$0.00</h3>
                        <p>Total Sales</p>
                    </div>
                </div>
                <div class="stat-card blue">
                    <div class="stat-icon blue">
                        <i data-lucide="shopping-bag"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="total-transactions">0</h3>
                        <p>Transactions</p>
                    </div>
                </div>
                <div class="stat-card green">
                    <div class="stat-icon green">
                        <i data-lucide="trending-up"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="avg-transaction">$0.00</h3>
                        <p>Avg Transaction</p>
                    </div>
                </div>
                <div class="stat-card orange">
                    <div class="stat-icon orange">
                        <i data-lucide="package"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="items-sold">0</h3>
                        <p>Items Sold</p>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h3>Transaction History</h3>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Date & Time</th>
                            <th>Transaction ID</th>
                            <th>Items</th>
                            <th>Total</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="sales-table-body">
                        <!-- Sales will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Add/Edit Product Modal -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Add Product</h2>
                <button class="btn-icon" onclick="closeProductModal()">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <form id="product-form" onsubmit="saveProduct(event)">
                <div class="form-group">
                    <label for="product-barcode">Barcode</label>
                    <input type="text" id="product-barcode" required>
                </div>
                <div class="form-group">
                    <label for="product-name">Product Name</label>
                    <input type="text" id="product-name" required>
                </div>
                <div class="form-group">
                    <label for="product-category">Category</label>
                    <select id="product-category" required>
                        <option value="">Select Category</option>
                        <option value="Electronics">Electronics</option>
                        <option value="Clothing">Clothing</option>
                        <option value="Food">Food</option>
                        <option value="Beverages">Beverages</option>
                        <option value="Home">Home & Garden</option>
                        <option value="Health">Health & Beauty</option>
                        <option value="Sports">Sports & Outdoors</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="product-price">Price ($)</label>
                        <input type="number" id="product-price" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="product-cost">Cost ($)</label>
                        <input type="number" id="product-cost" step="0.01" min="0" value="0">
                    </div>
                </div>
                <div class="form-group">
                    <label for="product-stock">Stock Quantity</label>
                    <input type="number" id="product-stock" min="0" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeProductModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Save Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkout-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Process Payment</h2>
                <button class="btn-icon" onclick="closeCheckoutModal()">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="checkout-summary">
                <div class="checkout-total">
                    <span>Total Amount:</span>
                    <span id="checkout-total">$0.00</span>
                </div>
                <div class="payment-methods">
                    <button class="payment-btn" onclick="completePayment('cash')">
                        <i data-lucide="banknote"></i>
                        <span>Cash</span>
                    </button>
                    <button class="payment-btn" onclick="completePayment('card')">
                        <i data-lucide="credit-card"></i>
                        <span>Card</span>
                    </button>
                    <button class="payment-btn" onclick="completePayment('digital')">
                        <i data-lucide="smartphone"></i>
                        <span>Digital</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div id="receipt-modal" class="modal">
        <div class="modal-content receipt-content">
            <div class="receipt" id="receipt">
                <!-- Receipt will be generated here -->
            </div>
            <div class="receipt-actions">
                <button class="btn-secondary" onclick="printReceipt()">
                    <i data-lucide="printer"></i> Print
                </button>
                <button class="btn-primary" onclick="closeReceiptModal()">
                    <i data-lucide="check"></i> Done
                </button>
            </div>
        </div>
    </div>

    <!-- Stock Adjustment Modal -->
    <div id="stock-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Adjust Stock</h2>
                <button class="btn-icon" onclick="closeStockModal()">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <form id="stock-form" onsubmit="adjustStock(event)">
                <div class="form-group">
                    <label>Product: <span id="stock-product-name"></span></label>
                    <label>Current Stock: <span id="stock-current"></span></label>
                </div>
                <div class="form-group">
                    <label for="stock-adjustment">Adjustment Type</label>
                    <select id="stock-adjustment-type" onchange="updateStockLabel()">
                        <option value="add">Add Stock</option>
                        <option value="remove">Remove Stock</option>
                        <option value="set">Set Stock</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="stock-quantity" id="stock-quantity-label">Quantity to Add</label>
                    <input type="number" id="stock-quantity" min="0" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeStockModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Update Stock</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>